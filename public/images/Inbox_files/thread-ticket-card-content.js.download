(window.webpackJsonp=window.webpackJsonp||[]).push([["thread-ticket-card-content"],{"5YQQ":function(e,t,a){"use strict";var n=a("QgEn"),i=a("19qb"),s=a("VfuR"),o=a.n(s),r=a("d0QT"),c=a("Ktcs"),d=a("0HCf"),u=a.n(d),b=a("MyjV"),j=a("omic"),l=a.n(j),m=a("QYOI"),p=a("lv1D"),v=a("HZCd"),O=a("6L7K"),h=a("xlGk"),f=a("3W4S"),x=a("EeNa"),y=a("R3au"),g=a("leqx"),k=a("lKVG"),T=a("lWsH"),C=a("xRv3"),I=a("hsdY"),R=a("ThQy"),S=a("CFVt"),N={id:"c9b694c33c0fac7c6d7e53ce85c308a7ab64077c4dcef69f74e8f45f2ea5c543",kind:"Document",definitions:function(e){var t={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var a=e.name.value;if(t[a])return!1;t[a]=!0;return!0})}([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchProperties"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subjectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"names"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"crmObject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"objectType"}}},{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"subjectId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"objectTypeDefinition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"objectSummaryPropertyNames"}}]}},{kind:"Field",name:{kind:"Name",value:"allProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"properties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"names"},value:{kind:"Variable",name:{kind:"Name",value:"names"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}}]}}]}}].concat(f.a.definitions))},q=function(e){var t=e.auth,a=e.readOnly,i=e.source,s=e.objectTypeId,o=e.objectId,d=e.onChange,j=e.onSaveError,f=e.onSaveSuccess,g=e.propertyNames,k=e.showFooterButtons,q=void 0!==k&&k,P=Object(R.b)()||S.c,w=Object(b.useQuery)(N,{variables:{objectType:s,subjectId:parseInt(o,10),names:g},partialRefetch:!0}),M=w.loading,A=w.error,D=w.data,F=D&&D.crmObject,E=Object(c.useMemo)(function(){return{user:m.Map.isMap(t.user)?t.user.toJS():t.user,gates:m.List.isList(t.gates)?t.gates.toJS():t.gates,portal:m.Map.isMap(t.portal)?t.portal.toJS():t.portal}},[t]),V=Object(c.useCallback)(function(){return T.b},[]),B=Object(c.useMemo)(function(){if(M||A||!F)return null;var e=F.properties.reduce(function(e,t){return e.set(t.name,{propertyValue:t})},Object(m.Map)());return g.map(function(t){return e.get(t)})},[F,A,M,g]);if(M)return Object(n.jsx)(y.a,{});if(A)return Object(n.jsx)(x.a,{});if(!i){var K="Must pass a source prop";u.a.warn({message:K});throw new Error(K)}var Q=Object(I.a)(s,D.crmObject);return Object(n.jsx)(C.a,{children:Object(n.jsx)(O.a.Provider,{value:{definition:D.crmObject.objectTypeDefinition,objectType:s,objectId:o,primaryDisplayLabel:Q},children:Object(n.jsx)(p.a.Provider,{value:{propertySource:i,propertySourceId:l()(["user","email"],t)},children:Object(n.jsx)(r.a.Provider,{value:{canEditSubject:!a,canDeleteSubject:!a,gates:E.gates,getPropertyPermission:V,readOnly:a,canView:!0,scopes:E.user.scopes},children:Object(n.jsx)(v.a.Provider,{value:{onShowPropertyHistory:null},children:Object(n.jsx)(R.a.Provider,{value:P,children:Object(n.jsx)(h.default,{subjectId:o,objectId:o,objectType:s,data:{propertyCardEntries:B,cardId:"0"},isEditable:!a,onChange:d,onSaveError:j,onSaveSuccess:f,showFooterButtons:q})})})})})})})};q.propTypes={auth:o.a.oneOfType([o.a.object,o.a.instanceOf(m.Map)]).isRequired,source:o.a.string.isRequired,readOnly:o.a.bool,objectId:o.a.string.isRequired,objectTypeId:o.a.oneOfType([k.a,g.a]).isRequired,onChange:o.a.func,onSaveError:o.a.func,onSaveSuccess:o.a.func,propertyNames:o.a.arrayOf(o.a.string.isRequired).isRequired,showFooterButtons:o.a.bool};var P=q,w=a("kPoh"),M=a("8cy2"),A=function(e){var t=e.objectId,a=e.objectTypeId,s=e.onChange,o=e.onSaveError,c=e.onSaveSuccess,d=e.propertyNames,u=Object(i.useSelector)(M.a),b=Object(r.b)().readOnly;return Object(n.jsx)(P,{auth:u,objectId:t,objectTypeId:a,onChange:s,onSaveSuccess:c,onSaveError:o,propertyNames:d,readOnly:b,source:w.a})};A.propTypes={objectId:o.a.string.isRequired,objectTypeId:o.a.string.isRequired,onChange:o.a.func,onSaveError:o.a.func,onSaveSuccess:o.a.func,propertyNames:o.a.arrayOf(o.a.string).isRequired};t.a=A},KAwS:function(e,t,a){"use strict";var n=a("fzi9"),i=a("QgEn"),s=a("Ktcs"),o=a("9f1P"),r=a.n(o),c=a("DqRu"),d=a("9xhK"),u=a("46u0"),b=a.n(u),j=r.a.div.withConfig({displayName:"RetryRequestMessage__ErrorMessageWrapper",componentId:"sc-1v41ns2-0"})(["text-align:center;"]),l=r.a.h5.withConfig({displayName:"RetryRequestMessage__ErrorMessageHeader",componentId:"sc-1v41ns2-1"})(["margin-top:8px;margin-bottom:8px;"]),m=function(e){var t=e.button,a=e.message,o=e.retry,r=e.title,u=Object(s.useState)(!1),m=Object(n.a)(u,2),p=m[0],v=m[1],O=function(){v(!0);o()};return Object(i.jsxs)(j,{children:[Object(i.jsx)(d.a,{name:"errors/general"}),Object(i.jsx)(l,{children:r}),Object(i.jsx)("p",{className:"m-y-1",children:a}),p?Object(i.jsx)(b.a,{className:"m-y-2",message:"conversations-inbox-ui.retryFailedRequest.retryFailedText"}):Object(i.jsx)(c.a,{className:"m-y-2",use:"tertiary",size:"xs",onClick:O,children:t})]})};m.defaultProps={button:Object(i.jsx)(b.a,{message:"conversations-inbox-ui.retryFailedRequest.button"}),message:Object(i.jsx)(b.a,{message:"conversations-inbox-ui.retryFailedRequest.message"}),title:Object(i.jsx)(b.a,{message:"conversations-inbox-ui.retryFailedRequest.title"})};t.a=m},XRMQ:function(e,t,a){"use strict";a.r(t);a.d(t,"NoThreadTicketContent",function(){return M});a.d(t,"Content",function(){return A});a.d(t,"ThreadTicketCardContentV2",function(){return F});var n=a("QgEn"),i=a("Ktcs"),s=a("VfuR"),o=a.n(s),r=a("19qb"),c=a("46u0"),d=a.n(c),u=a("l52g"),b=a("DqRu"),j=a("vuW9"),l=a("MQNR"),m=a("dwuz"),p=a("2IIJ"),v=a("dIqZ"),O=a("9/mv"),h=a("vEdG"),f=a("teXu"),x=a("5YQQ"),y=a("ftsY"),g=a("KHqm"),k=a("XnWd"),T=a("KAwS"),C=a("xRd2"),I=a("ypMi"),R=a("91cS"),S=a("Pda3"),N=l.TICKET,q=l.TICKET+"_V2",P=[h.f,h.a,h.c,h.d,h.e,h.b],w=function(e){var t=e.isUngatedForCvTicketsStateSync,a=e.onDisassociationClick,i=e.children;return t?i:Object(n.jsx)(g.a,{onClick:a,title:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.crm-integration.ThreadTicketCard.disassociateTooltip"}),children:i})},M=function(e){var t=e.createDisabled,a=e.onCreateClick;return Object(n.jsxs)("div",{"data-test-id":"thread-ticket-card-no-ticket",children:[Object(n.jsx)("p",{children:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.crm-integration.ThreadTicketCard.emptyContentText"})}),Object(n.jsx)(j.a,{disabled:!t,title:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.crm-integration.permissionsTooltip"}),children:Object(n.jsx)(b.a,{disabled:t,size:"sm",use:"tertiary-light",onClick:a,"data-test-id":"create-thread-ticket-button",children:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.crm-integration.TicketsCardContent.createTicketButton"})})})]})},A=function(e){var t=e.contactId,a=e.conversationId,s=e.createDisabled,o=e.onCreateClick,c=e.onRemoveAssociation,b=e.threadId,j=Object(r.useSelector)(v.h),m=Object(r.useSelector)(v.e),O=Object(R.b)({conversationId:a,isUngatedForReadV2Associations:j,threadId:b}),h=O.threadTicket,g=O.refetchTickets,k=O.asyncAssociatedTickets,q=Object(S.b)(k),A=Object(S.a)(k),D=Object(f.t)(h),F=Object(i.useCallback)(function(){var e=p.a.fromJS(h);c(e)},[c,h]);return q?Object(n.jsx)(u.a,{grow:!0}):A?Object(n.jsx)(T.a,{message:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.crm-integration.ThreadTicketCard.failed.message"}),retry:g}):D?Object(n.jsx)(C.a,{stepKey:I.e,header:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.new-feature-onboarding.crmSidebar.threadTicketCard.header"}),body:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.new-feature-onboarding.crmSidebar.threadTicketCard.body"}),placement:"left",children:Object(n.jsxs)("div",{"data-test-id":"thread-ticket-card-with-ticket",children:[w({isUngatedForCvTicketsStateSync:m,onDisassociationClick:F,children:Object(n.jsx)(x.a,{objectId:D,objectTypeId:N,propertyNames:P,onSaveSuccess:g})}),Object(n.jsx)(y.a,{objectType:l.TICKET,subjectId:t,objectId:D,objectTypeId:N,onUpdate:g,panelTitle:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.crm-integration.FavoritePropertiesPanel.ticket.header"})})]})}):Object(n.jsx)(C.a,{stepKey:I.e,header:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.new-feature-onboarding.crmSidebar.threadTicketCard.header"}),body:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.new-feature-onboarding.crmSidebar.threadTicketCard.body"}),placement:"left",children:Object(n.jsx)(M,{onCreateClick:o,createDisabled:s})})};A.propTypes={contactId:o.a.string.isRequired,createDisabled:o.a.bool.isRequired,onCreateClick:o.a.func.isRequired,onRemoveAssociation:o.a.func.isRequired};var D=function(e){var t=e.associatedObject,a=e.onConfirm,i=e.onReject;return Object(n.jsx)(k.a,{associatedObject:t,onConfirm:a,onReject:i})},F=Object(m.a)({toObjectType:q,mutation:O.d,countProp:"conversationItemsCount",renderRemoveAssociationModal:D})(A);t.default=F},XnWd:function(e,t,a){"use strict";var n=a("QgEn"),i=a("Ktcs"),s=a("VfuR"),o=a.n(s),r=a("iJaT"),c=a("GBWN"),d=a("WLqE"),u=a("DqRu"),b=a("BiPx"),j=a("Sshb"),l=a("Ryvg"),m=a("46u0"),p=a.n(m),v=a("jqvl"),O=a.n(v),h=a("P4dz"),f=a("4TVJ"),x=a("RyfP"),y=function(e){var t=e.associatedObject,a=e.onConfirm,s=e.onReject,o=Object(i.useCallback)(function(e){Object(f.c)(Object(x.a)());a(e)},[a]);return Object(n.jsxs)(r.a,{width:550,use:"danger",children:[Object(n.jsxs)(c.a,{children:[Object(n.jsx)(d.a,{children:Object(n.jsx)(p.a,{message:"conversations-inbox-ui.crm-integration.RemoveAssociationModal.ticket.header"})}),Object(n.jsx)(b.a,{onClick:s})]}),Object(n.jsx)(j.a,{children:Object(n.jsx)(O.a,{message:"conversations-inbox-ui.crm-integration.RemoveAssociationModal.ticket.message",options:{object:Object(h.g)(t)}})}),Object(n.jsxs)(l.a,{children:[Object(n.jsx)(u.a,{onClick:o,use:"danger","data-test-id":"disassociate-modal-confirm",children:Object(n.jsx)(p.a,{message:"conversations-inbox-ui.crm-integration.RemoveAssociationModal.confirmBtn"})}),Object(n.jsx)(u.a,{onClick:s,use:"tertiary-light",children:Object(n.jsx)(p.a,{message:"conversations-inbox-ui.crm-integration.RemoveAssociationModal.rejectBtn"})})]})]})};y.propTypes={associatedObject:o.a.object.isRequired,onConfirm:o.a.func.isRequired,onReject:o.a.func.isRequired};t.a=y},dwuz:function(e,t,a){"use strict";a.d(t,"a",function(){return g});var n=a("vTCD"),i=a("k8Et"),s=a("mNyx"),o=a("txVw"),r=a("UMxk"),c=a("pGTB"),d=a("QgEn"),u=a("VfuR"),b=a.n(u),j=a("Ktcs"),l=a("9hyx"),m=a("46u0"),p=a.n(m),v=a("P4dz"),O=a("MO2O"),h=a("leqx"),f=a("tPYf"),x=a("2IJn"),y=a("MQNR"),g=function(e){var t=e.toObjectType,a=e.mutation,u=e.countProp,m=e.updateBuilder,g=e.renderRemoveAssociationModal,k=void 0===g?null:g;return function(e){var g=function(b){Object(c.a)(j,b);function j(){var e;Object(n.a)(this,j);(e=Object(s.a)(this,Object(o.a)(j).call(this))).handleShowModal=function(t){e.setState({isModalOpen:!0,association:t})};e.handleHideModal=function(){e.setState({isModalOpen:!1})};e.handleRemoveConversationAssociation=function(a){var n=a.count,i=a.update,s=a.association,o=e.props,r=o.conversationId,c=o.tracker,d=o.onDisassociationSuccess,u=y.CONVERSATION+"_TO_"+t;return r?e.removeAssociation({variables:{removeAssociationInput:{fromObjectId:r,toObjectId:Object(v.a)(s),associationType:u},conversationId:r,count:n},update:i}).then(function(e){if(!(0!==e.data.deleteCrmObjectAssociation.userErrors.length)){d&&d({association:s,associationType:u,subjectId:r,objectId:Object(v.a)(s),fromObjectType:y.CONVERSATION,toObjectType:t});Object(x.a)(c,{type:y.CONVERSATION})}}):null};e.handleRemoveRecordAssociation=function(a){var n=a.count,i=a.update,s=a.association,o=e.props,r=o.conversationId,c=o.objectType,d=o.subjectId,u=o.tracker,b=o.onDisassociationSuccess,j=c+"_TO_"+t;return e.removeAssociation({variables:{removeAssociationInput:{fromObjectId:d,toObjectId:Object(v.a)(s),associationType:j},conversationId:r,count:n},update:i}).then(function(e){if(!(0!==e.data.deleteCrmObjectAssociation.userErrors.length)){b&&b({association:s,associationType:j,subjectId:d,objectId:Object(v.a)(s),fromObjectType:c,toObjectType:t});Object(x.a)(u,{type:t})}})};e.state={isModalOpen:!1};e.handleRemoveAssociation=e.handleRemoveAssociation.bind(Object(r.a)(e));return e}Object(i.a)(j,[{key:"handleRemoveAssociation",value:function(){var e;u&&(e=this.props[u]);var t={count:e,update:m&&m({objectType:this.props.objectType,subjectId:parseInt(this.props.subjectId,10),conversationId:this.props.conversationId}),association:this.state.association};this.handleHideModal();var a=this.props,n=a.shouldDisassociateConversation,i=[a.shouldDisassociateRecord&&this.handleRemoveRecordAssociation(t),n&&this.handleRemoveConversationAssociation(t)].filter(function(e){return e});return Promise.all(i)}},{key:"renderRemoveAssociationModal",value:function(){if(!this.state.isModalOpen)return null;if(k)return k({associatedObject:this.state.association,onConfirm:this.handleRemoveAssociation,onReject:this.handleHideModal});var e=Object(d.jsx)(p.a,{message:"customerDataSidebar.deleteModal.associatedObjectTitle",options:{associatedObject:Object(v.g)(this.state.association),subject:Object(v.g)(this.props.subject)}}),t=Object(d.jsx)(p.a,{message:"customerDataSidebar.deleteModal.remove"}),a=Object(d.jsx)(p.a,{message:"customerDataSidebar.deleteModal.cancel"});return Object(d.jsx)(O.a,{"data-test-id":"remove-association-modal",confirmLabel:t,onConfirm:this.handleRemoveAssociation,onReject:this.handleHideModal,message:e,rejectLabel:a})}},{key:"render",value:function(){var t=this;return Object(d.jsx)(l.Mutation,{mutation:a,children:function(a){t.removeAssociation=a;return Object(d.jsxs)("div",{children:[Object(d.jsx)(e,Object.assign({},t.props,{onRemoveAssociation:t.handleShowModal})),t.renderRemoveAssociationModal()]})}})}}]);return j}(j.PureComponent);g.propTypes={objectType:h.a,subject:f.a,subjectId:b.a.string,conversationId:b.a.string,tracker:b.a.object,onDisassociationSuccess:b.a.func,shouldDisassociateConversation:b.a.bool,shouldDisassociateRecord:b.a.bool,renderRemoveAssociationModal:b.a.func};g.defaultProps={shouldDisassociateConversation:!1,shouldDisassociateRecord:!0};return g}}},ftsY:function(e,t,a){"use strict";var n=a("fzi9"),i=a("QgEn"),s=a("Ktcs"),o=a("VfuR"),r=a.n(o),c=a("DqRu"),d=a("46u0"),u=a.n(d),b=a("4TVJ"),j=a("ZFBm"),l=a("9f1P"),m=a.n(l),p=a("mDbF"),v=a.n(p),O=a("CUpT"),h=a("WLqE"),f=a("BiPx"),x=a("pw7o"),y=a("SV9y"),g=a("VQTc"),k=a("Cftt"),T=a("l52g"),C=a("QhRM"),I=a("KXN9"),R=a("Pda3"),S=a("RyfP"),N=a("5YQQ"),q=a("0jxi"),P=a("x1JE"),w=a("jWlg"),M=a.n(w),A=a("GEiH"),D=a("Ubk/"),F=a("dW5E"),E=function(e){var t=e.objectType,a=e.subjectId,n=e.conversationId;return Object(D.b)({query:F.c,variables:{objectType:t,subjectId:a,conversationId:n}}).then(function(e){var a=e.data,n=e.errors;if(n)throw new Error(n);return Object(F.g)(t,a)})},V=a("Dskb"),B=Object(A.a)({requestFn:E,actionTypes:V.b,toRecordFn:M.a}),K=a("omic"),Q=a.n(K)()(["crmIntegration","cardFavoriteProperties"]),U=function(e){var t=e.objectType,a=e.subjectId,n=Object(q.a)({action:B,selector:function(e){return Object(P.b)(t,Q(e))},id:{objectType:t,subjectId:a},idTransform:function(e){return e}});return{asyncProperties:n.asyncData,retryFailed:n.retryFailed}},z=a("nDpY"),H=a.n(z),L=function(e){var t=e.objectId,a=e.objectType;return"/contacts/"+H.a.get()+"/"+a.toLowerCase()+"/"+t+"/properties"},W=a("eP/i"),Y=a("CFVt"),_=a("uaYc"),J=a("jqvl"),G=a.n(J),X=a("sld6"),Z=a("fwDr"),$=m.a.div.withConfig({displayName:"InboxSaveBar__StyledFooter",componentId:"jwrkn6-0"})(["background:",";border-top:1px solid ",";position:absolute;bottom:0;left:0;right:0;z-index:1111;"],W.GYPSUM,W.BATTLESHIP),ee=function(e){var t=e.formattedChanges,a=e.hasErrors,n=e.handleSave,s=e.handleCancel,o=e.hasChanges;return Object(i.jsxs)($,{className:"UniversalSaveBar p-x-4",children:[Object(i.jsx)(Z.a,{className:"p-y-3",children:Object(i.jsx)(G.a,{message:"conversations-inbox-ui.crm-integration.saveBar.info",options:{changes:t}})}),Object(i.jsxs)(X.a,{className:"p-bottom-5",children:[Object(i.jsx)(c.a,{disabled:a||!o,onClick:n,"data-selenium-test":"UniversalSaveBar-button-primary",use:"primary",children:Object(i.jsx)(G.a,{message:"conversations-inbox-ui.crm-integration.saveBar.saveButtonText"})}),Object(i.jsx)(c.a,{disabled:a||!o,className:"m-right-8","data-selenium-test":"UniversalSaveBar-button",onClick:s,children:Object(i.jsx)(G.a,{message:"conversations-inbox-ui.crm-integration.saveBar.cancelButtonText"})})]})]})};ee.propTypes={formattedChanges:r.a.string,handleCancel:r.a.func.isRequired,handleSave:r.a.func.isRequired,hasChanges:r.a.bool.isRequired,hasErrors:r.a.bool.isRequired};var te=Object(_.a)(ee,Y.c),ae=a("+O8Q"),ne=m.a.div.withConfig({displayName:"FavoritePropertiesPanel__SaveBarSpacer",componentId:"sc-1i4di8s-0"})(["width:100%;height:110px;"]),ie=function(){return Object(i.jsx)(y.a,{children:Object(i.jsx)(T.a,{layout:"centered",size:"small",grow:!0})})},se=function(e){var t=e.retry;return Object(i.jsxs)(O.a,{title:v.a.text("conversations-inbox-ui.crm-integration.FavoritePropertiesPanel.error.header"),children:[Object(i.jsx)("p",{children:Object(i.jsx)(u.a,{message:"conversations-inbox-ui.crm-integration.FavoritePropertiesPanel.error.message"})}),Object(i.jsx)(c.a,{use:"tertiary",size:"xs",onClick:t,children:Object(i.jsx)(u.a,{message:"conversations-inbox-ui.crm-integration.FavoritePropertiesPanel.error.retryButton"})})]})},oe=function(e){var t=e.closePanel,a=e.objectId,n=e.objectType,o=e.objectTypeId,r=e.onUpdate,c=e.panelTitle,d=e.subjectId,j=U({objectType:n,subjectId:d}),l=j.asyncProperties,m=j.retryFailed,p=Object(s.useCallback)(function(){Object(b.c)(Object(S.b)({objectType:n}))},[n]);return Object(i.jsxs)(x.a,{width:ae.e,children:[Object(i.jsx)(te,{}),Object(i.jsx)(f.a,{onClick:t}),Object(i.jsx)(g.a,{children:Object(i.jsx)(h.a,{children:c})}),Object(R.b)(l)&&Object(i.jsx)(ie,{}),Object(R.a)(l)&&Object(i.jsx)(se,{retry:m}),Object(R.e)(l)&&Object(i.jsx)(y.a,{children:Object(i.jsxs)(k.a,{children:[Object(i.jsx)(N.a,{objectId:a,objectTypeId:o,propertyNames:Object(I.a)(l),onSaveSuccess:r}),Object(i.jsx)(C.a,{href:L({objectId:a,objectType:n}),external:!0,onClick:p,children:Object(i.jsx)(u.a,{message:"conversations-inbox-ui.crm-integration.FavoritePropertiesPanel.editPropertiesButton"})}),Object(i.jsx)(ne,{})]})})]})};oe.propTypes={closePanel:r.a.func.isRequired,objectId:r.a.string.isRequired,objectType:r.a.string.isRequired,objectTypeId:r.a.string.isRequired,onUpdate:r.a.func,panelTitle:r.a.node.isRequired,subjectId:r.a.string.isRequired};var re=function(e){var t=e.objectId,a=e.objectType,o=e.objectTypeId,r=e.onUpdate,d=e.panelTitle,l=e.subjectId,m=Object(s.useState)(!1),p=Object(n.a)(m,2),v=p[0],O=p[1],h=Object(s.useCallback)(function(){O(!0);Object(b.c)(Object(j.e)({objectType:a}))},[a]),f=Object(s.useCallback)(function(){return O(!1)},[]);return Object(i.jsxs)("div",{className:"justify-center",children:[v&&Object(i.jsx)(oe,{closePanel:f,objectId:t,objectTypeId:o,objectType:a,onUpdate:r,subjectId:l,panelTitle:d}),Object(i.jsx)(c.a,{use:"link",onClick:h,children:Object(i.jsx)(u.a,{message:"conversations-inbox-ui.crm-integration.FavoritePropertiesPanel.expandButton"})})]})};re.propTypes={objectId:r.a.string.isRequired,objectType:r.a.string.isRequired,objectTypeId:r.a.string.isRequired,onUpdate:r.a.func,panelTitle:r.a.node.isRequired,subjectId:r.a.string.isRequired};t.a=re},"jVA+":function(e,t,a){"use strict";a.r(t);a.d(t,"NoThreadTicketContent",function(){return w});a.d(t,"Content",function(){return M});a.d(t,"ThreadTicketCardContent",function(){return D});var n=a("QgEn"),i=a("Ktcs"),s=a("VfuR"),o=a.n(s),r=a("19qb"),c=a("46u0"),d=a.n(c),u=a("l52g"),b=a("DqRu"),j=a("vuW9"),l=a("MQNR"),m=a("dwuz"),p=a("VA+L"),v=a("dIqZ"),O=a("9/mv"),h=a("vEdG"),f=a("teXu"),x=a("5YQQ"),y=a("ftsY"),g=a("KHqm"),k=a("XnWd"),T=a("KAwS"),C=a("xRd2"),I=a("ypMi"),R=a("91cS"),S=a("Pda3"),N=l.TICKET,q=[h.f,h.a,h.c,h.d,h.b,h.e],P=function(e){var t=e.isUngatedForCvTicketsStateSync,a=e.onDisassociationClick,i=e.children;return t?i:Object(n.jsx)(g.a,{onClick:a,title:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.crm-integration.ThreadTicketCard.disassociateTooltip"}),children:i})},w=function(e){var t=e.createDisabled,a=e.onCreateClick;return Object(n.jsxs)("div",{"data-test-id":"thread-ticket-card-no-ticket",children:[Object(n.jsx)("p",{children:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.crm-integration.ThreadTicketCard.emptyContentText"})}),Object(n.jsx)(j.a,{disabled:!t,title:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.crm-integration.permissionsTooltip"}),children:Object(n.jsx)(b.a,{disabled:t,size:"sm",use:"tertiary-light",onClick:a,"data-test-id":"create-thread-ticket-button",children:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.crm-integration.TicketsCardContent.createTicketButton"})})})]})},M=function(e){var t=e.contactId,a=e.createDisabled,s=e.onCreateClick,o=e.onRemoveAssociation,c=e.threadId,b=Object(p.a)({threadId:c}).conversationId,j=Object(r.useSelector)(v.h),m=Object(r.useSelector)(v.e),O=Object(R.b)({conversationId:b,isUngatedForReadV2Associations:j,threadId:c}),h=O.threadTicket,g=O.refetchTickets,k=O.asyncAssociatedTickets,M=Object(S.b)(k),A=Object(S.a)(k),D=Object(f.t)(h),F=Object(i.useCallback)(function(){o(h)},[o,h]);return M?Object(n.jsx)(u.a,{grow:!0}):A?Object(n.jsx)(T.a,{message:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.crm-integration.ThreadTicketCard.failed.message"}),retry:g}):D?Object(n.jsx)(C.a,{stepKey:I.e,header:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.new-feature-onboarding.crmSidebar.threadTicketCard.header"}),body:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.new-feature-onboarding.crmSidebar.threadTicketCard.body"}),placement:"left",children:Object(n.jsxs)("div",{"data-test-id":"thread-ticket-card-with-ticket",children:[P({isUngatedForCvTicketsStateSync:m,onDisassociationClick:F,children:Object(n.jsx)(x.a,{objectId:D,objectTypeId:N,propertyNames:q,onSaveSuccess:g})}),Object(n.jsx)(y.a,{objectType:l.TICKET,subjectId:t,objectId:D,objectTypeId:N,onUpdate:g,panelTitle:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.crm-integration.FavoritePropertiesPanel.ticket.header"})})]})}):Object(n.jsx)(C.a,{stepKey:I.e,header:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.new-feature-onboarding.crmSidebar.threadTicketCard.header"}),body:Object(n.jsx)(d.a,{message:"conversations-inbox-ui.new-feature-onboarding.crmSidebar.threadTicketCard.body"}),placement:"left",children:Object(n.jsx)(w,{onCreateClick:s,createDisabled:a})})};M.propTypes={contactId:o.a.string.isRequired,createDisabled:o.a.bool.isRequired,onCreateClick:o.a.func.isRequired,onRemoveAssociation:o.a.func.isRequired};var A=function(e){var t=e.associatedObject,a=e.onConfirm,i=e.onReject;return Object(n.jsx)(k.a,{associatedObject:t,onConfirm:a,onReject:i})},D=Object(m.a)({toObjectType:l.TICKET,mutation:O.d,countProp:"conversationItemsCount",renderRemoveAssociationModal:A})(M);t.default=D}}]);
//# sourceMappingURL=thread-ticket-card-content.js.map