"use strict";"use es6";!function(){var t=/^(https:\/\/)?((app(-.+)?|local|www)\.)?(hubspot)(qa)?(\.com)/,e=document&&document.domain?document.domain.toLowerCase():"";if(e){var o=t.test(e);window.hubspot=window.hubspot||{};window.hubspot.notifications=window.hubspot.notifications||{};if(o){var i=window.hubspot.notifications.dev||window.localStorage&&window.localStorage.NOTIFICATION_SIDEBAR_DEV,n=document.location.host.split("."),a=i?"local":n[0],s=e.indexOf("qa")>=0?"qa":"",d=!i&&e.indexOf("qa")>=0?"-qa":"",c="//"+a+".hubspot"+s+".com/notification-sidebar/"+h(),r="//"+(i?"local":"static")+".hsappstatic.net/notification-sidebar/"+(i?"static/sass":"ex/css")+"/notificationSidebarBundle"+d+".css",u=function(t,e,o){t&&(o?t.classList.add(e):t.classList.remove(e))},l="notification-sidebar-container",f=function(){var t='<iframe id="notification-sidebar-iframe" data-test-id="notification-sidebar-iframe" src="'+c+'" scrolling="no"></iframe>',e=document.createElement("div");e.className=l;e.innerHTML=t;return e},m=function(){u(document.body,"notification-sidebar-opened",!1);var t=document.getElementsByClassName(l);t.length>0&&document.body.removeChild(t[0])},p=function(){if(window.hubspot.portal&&window.hubspot.portal.id){u(document.body,"notification-sidebar-opened",!0);document.body.appendChild(f())}},b=function(e){if(t.test(e.origin)&&"string"==typeof e.data){var o;try{o=JSON.parse(e.data)}catch(t){i&&console&&console.log("Notification sidebar received an unparsable postMessage:",t,e);return}if(o.name)switch(o.name){case"notification-sidebar:close":m();return;case"notification-sidebar:open":p();return;case"notifications:ready":var n=document.querySelector("#notifications-iframe");n&&n.setAttribute("data-test-id","notifications-iframe-loaded");return;default:i&&console&&console.log("Notification sidebar received postMessage with no handler:",o);return}}},w=function(){var t=document.head||document.body,e=document.createElement("link");e.type="text/css";e.rel="stylesheet";e.href=r;t.appendChild(e);window.hubspot.notifications.openSidebar=p;window.addEventListener&&window.addEventListener("message",b)};(function(){"loading"!==document.readyState?w():document.addEventListener("DOMContentLoaded",function(){w()})})()}}function h(){var t=/^\/(?:[A-Za-z0-9-_]*)\/(\d+)(?:\/|$)/.exec(document.location.pathname);return t&&t.length>1?t[1]:""}}();

//# sourceMappingURL=notificationSidebarLoader.js.map